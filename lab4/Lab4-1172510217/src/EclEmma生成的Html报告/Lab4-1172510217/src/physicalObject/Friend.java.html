<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>Friend.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">test (2019年5月19日 下午11:06:41)</a> &gt; <a href="../../index.html" class="el_group">Lab4-1172510217</a> &gt; <a href="../index.html" class="el_bundle">src</a> &gt; <a href="index.source.html" class="el_package">physicalObject</a> &gt; <span class="el_source">Friend.java</span></div><h1>Friend.java</h1><pre class="source lang-java linenums">package physicalObject;

import java.util.HashMap;
import java.util.LinkedList;
import java.util.Map;
import java.util.logging.Logger;

import applications.App;

<span class="pc bpc" id="L10" title="1 of 2 branches missed.">public class Friend extends PhysicalObject {</span>

<span class="fc" id="L12">    private static final Logger logger = Logger.getLogger(App.class.getSimpleName());</span>

<span class="fc" id="L14">    private String friendName = new String();</span>
<span class="fc" id="L15">    private int age = -1;</span>
<span class="fc" id="L16">    private String sex = new String();</span>
<span class="fc" id="L17">    private Map&lt;Friend, Double&gt; socialTieMap = new HashMap&lt;&gt;();</span>
<span class="fc" id="L18">    private LinkedList&lt;Friend&gt; allFriends = new LinkedList&lt;&gt;();</span>

    /**
     * @return the friendName
     */
    public String getFriendName() {
<span class="pc bpc" id="L24" title="3 of 6 branches missed.">        assert friendName!=null &amp;&amp; !friendName.equals(&quot;&quot;) : logIn(&quot;参数错误：名字不应为null或空串&quot;);</span>
<span class="fc" id="L25">        return friendName;</span>
    }

    /**
     * precondition : friendName != null &amp;&amp; friendName != &quot;&quot;;
     * 
     * @param friendName the friendName to set
     */
    public void setFriendName(String friendName) {
<span class="pc bpc" id="L34" title="3 of 6 branches missed.">        assert friendName != null &amp;&amp; !friendName.equals(&quot;&quot;) : logIn(&quot;参数错误：名字不应为null或空串&quot;);</span>
<span class="fc" id="L35">        this.friendName = friendName;</span>
<span class="fc" id="L36">    }</span>

    /**
     * postcondition:age &gt;= 0
     * 
     * @return the age
     */
    public int getAge() {
<span class="pc bpc" id="L44" title="2 of 4 branches missed.">        assert age &gt;= 0 : logIn(&quot;参数错误：年龄应该非负&quot;);</span>
<span class="fc" id="L45">        return age;</span>
    }

    /**
     * precondition:age &gt;= 0
     * 
     * @param age the age to set
     */
    public void setAge(int age) throws AssertionError{
        try {
<span class="pc bpc" id="L55" title="2 of 4 branches missed.">            assert age &gt;= 0;</span>
<span class="nc" id="L56">        } catch (AssertionError e) {</span>
<span class="nc" id="L57">            logIn(&quot;参数错误：年龄应该非负&quot;);</span>
<span class="nc" id="L58">            throw new AssertionError();</span>
        }
<span class="fc" id="L60">        this.age = age;</span>
<span class="fc" id="L61">    }</span>

    /**
     * postcondition: sex should be &quot;F&quot; or &quot;M&quot;;
     * 
     * @return the sex
     */
    public String getSex() {
<span class="fc" id="L69">        return sex;</span>
    }

    /**
     * precondition: sex should be &quot;F&quot; or &quot;M&quot;;
     * 
     * @param sex the sex to set
     */
    public void setSex(String sex) {
<span class="pc bpc" id="L78" title="2 of 6 branches missed.">        assert sex.equals(&quot;F&quot;) || sex.equals(&quot;M&quot;) : logIn(&quot;参数错误：sex应为特定的字符串&quot;);</span>
<span class="fc" id="L79">        this.sex = sex;</span>
<span class="fc" id="L80">    }</span>

    /**
     * add a socialTie between him and his friend
     * 
     * @param friend   his friend
     * @param intimacy socialTie
     * @return true if the friend is not in the map; else false
     */
    public boolean addSocialTie(Friend friend, double intimacy) {
<span class="fc" id="L90">        boolean result = socialTieMap.containsKey(friend);</span>
<span class="fc" id="L91">        socialTieMap.put(friend, intimacy);</span>
<span class="fc" id="L92">        allFriends.add(friend);</span>
<span class="fc bfc" id="L93" title="All 2 branches covered.">        return !result;</span>
    }

    /**
     * delete a socialTie between him and his friend
     * 
     * @param friend his friend
     * @return true if the socialTie has been added; else false
     */
    public boolean deleteSocialTie(Friend friend) {
<span class="fc" id="L103">        Boolean result = socialTieMap.containsKey(friend);</span>
<span class="fc" id="L104">        socialTieMap.remove(friend);</span>
<span class="fc" id="L105">        allFriends.remove(friend);</span>
<span class="fc" id="L106">        return result;</span>
    }

    /**
     * get the socialTie between him and the friend
     * 
     * @param friend his friend
     * @return the socialTie
     */
    public double getSocialTie(Friend friend) {
<span class="fc bfc" id="L116" title="All 2 branches covered.">        if (socialTieMap.containsKey(friend)) {</span>
<span class="fc" id="L117">            return socialTieMap.get(friend);</span>
        }
<span class="fc" id="L119">        return 0;</span>
    }

    public LinkedList&lt;Friend&gt; getAllFriends() {
<span class="fc" id="L123">        return this.allFriends;</span>
    }

    @Override public String toString() {
<span class="fc bfc" id="L127" title="All 2 branches covered.">        if (getSex().equals(&quot;M&quot;)) {</span>
<span class="fc" id="L128">            return &quot;[name=&quot; + friendName + &quot;, age=&quot; + getAge() + &quot; sex=男&quot; + &quot;]&quot;;</span>
<span class="pc bpc" id="L129" title="1 of 2 branches missed.">        } else if (getSex().equals(&quot;F&quot;)) {</span>
<span class="fc" id="L130">            return &quot;[name=&quot; + friendName + &quot;, age=&quot; + getAge() + &quot; sex=女&quot; + &quot;]&quot;;</span>
        } else {
<span class="nc" id="L132">            return &quot;性别参数输入错误！&quot;;</span>
        }
    }

    private static String logIn(String message) {
<span class="nc" id="L137">        logger.severe(message);</span>
<span class="nc" id="L138">        return &quot;已将assert错误信息加载在日志文件里&quot;;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span>test (2019年5月19日 下午11:06:41)</div></body></html>