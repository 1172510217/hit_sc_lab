<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="zh"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>SocialNetworkCircleTest.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">test (2019年5月19日 下午11:06:41)</a> &gt; <a href="../../index.html" class="el_group">Lab4-1172510217</a> &gt; <a href="../index.html" class="el_bundle">test</a> &gt; <a href="index.source.html" class="el_package">circularOrbit</a> &gt; <span class="el_source">SocialNetworkCircleTest.java</span></div><h1>SocialNetworkCircleTest.java</h1><pre class="source lang-java linenums">package circularOrbit;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertFalse;
import static org.junit.jupiter.api.Assertions.assertTrue;

import java.io.File;
import java.io.IOException;

import org.junit.jupiter.api.Test;

import myException.FileChooseException;
import physicalObject.Friend;

<span class="fc" id="L15">class SocialNetworkCircleTest {</span>

    /**
     * testing strategy : 标签不合法
     */
    @Test void testLabel() throws IOException {
<span class="fc" id="L21">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L22">        File file = new File(&quot;src/TestFile/SocialNetworkFile/LabelTest.txt&quot;);</span>
        try {
<span class="nc" id="L24">            socialNetworkCircle.readFileAndCreateSystem(file);</span>
<span class="nc" id="L25">            assertTrue(false, &quot;此处不可达&quot;);</span>
<span class="pc" id="L26">        } catch (Exception e) {</span>
<span class="fc" id="L27">            assertEquals(e.getClass(), new FileChooseException().getClass());</span>
        }
<span class="fc" id="L29">    }</span>

    /**
     * 测试性别不合法
     */
    @Test void testSex() throws IOException {
<span class="fc" id="L35">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L36">        File file = new File(&quot;src/TestFile/SocialNetworkFile/SexTest.txt&quot;);</span>
        try {
<span class="nc" id="L38">            socialNetworkCircle.readFileAndCreateSystem(file);</span>
<span class="nc" id="L39">            assertTrue(false, &quot;此处不可达&quot;);</span>
<span class="pc" id="L40">        } catch (Exception e) {</span>
<span class="fc" id="L41">            assertEquals(e.getClass(), new FileChooseException().getClass());</span>
        }
<span class="fc" id="L43">    }</span>

    /**
     * 测试亲密度不合法：为0
     */
    @Test void testIntimacyZero() throws IOException {
<span class="fc" id="L49">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L50">        File file = new File(&quot;src/TestFile/SocialNetworkFile/IntimacyTest1.txt&quot;);</span>
        try {
<span class="nc" id="L52">            socialNetworkCircle.readFileAndCreateSystem(file);</span>
<span class="nc" id="L53">            assertTrue(false, &quot;此处不可达&quot;);</span>
<span class="pc" id="L54">        } catch (Exception e) {</span>
<span class="fc" id="L55">            assertEquals(e.getClass(), new FileChooseException().getClass());</span>
        }
<span class="fc" id="L57">    }</span>

    /**
     * 测试亲密度不合法：位数超限制
     */
    @Test void testIntimacyDigit() throws IOException {
<span class="fc" id="L63">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L64">        File file = new File(&quot;src/TestFile/SocialNetworkFile/IntimacyTest2.txt&quot;);</span>
        try {
<span class="nc" id="L66">            socialNetworkCircle.readFileAndCreateSystem(file);</span>
<span class="nc" id="L67">            assertTrue(false, &quot;此处不可达&quot;);</span>
<span class="pc" id="L68">        } catch (Exception e) {</span>
<span class="fc" id="L69">            assertEquals(e.getClass(), new FileChooseException().getClass());</span>
        }
<span class="fc" id="L71">    }</span>

    /**
     * 测试年龄不合法：不为整数
     */
    @Test void testAge() throws IOException {
<span class="fc" id="L77">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L78">        File file = new File(&quot;src/TestFile/SocialNetworkFile/AgeTest.txt&quot;);</span>
        try {
<span class="nc" id="L80">            socialNetworkCircle.readFileAndCreateSystem(file);</span>
<span class="nc" id="L81">            assertTrue(false, &quot;此处不可达&quot;);</span>
<span class="pc" id="L82">        } catch (Exception e) {</span>
<span class="fc" id="L83">            assertEquals(e.getClass(), new FileChooseException().getClass());</span>
        }
<span class="fc" id="L85">    }</span>

    /**
     * 测试中心用户缺失
     */
    @Test void testNoCentralUser() throws IOException {
<span class="fc" id="L91">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L92">        File file = new File(&quot;src/TestFile/SocialNetworkFile/CentralUserTest.txt&quot;);</span>
        try {
<span class="nc" id="L94">            socialNetworkCircle.readFileAndCreateSystem(file);</span>
<span class="nc" id="L95">            assertTrue(false, &quot;此处不可达&quot;);</span>
<span class="pc" id="L96">        } catch (Exception e) {</span>
<span class="fc" id="L97">            assertEquals(e.getClass(), new FileChooseException().getClass());</span>
        }
<span class="fc" id="L99">    }</span>

    /**
     * 测试有用户同名
     */
    @Test void testLabelSame() throws IOException {
<span class="fc" id="L105">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L106">        File file = new File(&quot;src/TestFile/SocialNetworkFile/LabelSameTest.txt&quot;);</span>
        try {
<span class="nc" id="L108">            socialNetworkCircle.readFileAndCreateSystem(file);</span>
<span class="nc" id="L109">            assertTrue(false, &quot;此处不可达&quot;);</span>
<span class="pc" id="L110">        } catch (Exception e) {</span>
<span class="fc" id="L111">            assertEquals(e.getClass(), new FileChooseException().getClass());</span>
        }
<span class="fc" id="L113">    }</span>

    /**
     * 测试依赖关系错误：有朋友未被定义就参与了亲密度构建
     */
    @Test void testDependency() throws IOException {
<span class="fc" id="L119">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L120">        File file = new File(&quot;src/TestFile/SocialNetworkFile/DependencyTest.txt&quot;);</span>
        try {
<span class="nc" id="L122">            socialNetworkCircle.readFileAndCreateSystem(file);</span>
<span class="nc" id="L123">            assertTrue(false, &quot;此处不可达&quot;);</span>
<span class="pc" id="L124">        } catch (Exception e) {</span>
<span class="fc" id="L125">            assertEquals(e.getClass(), new FileChooseException().getClass());</span>
        }
<span class="fc" id="L127">    }</span>

    /**
     * 测试多余无用信息行
     */
    @Test void testUselessLine() throws IOException {
<span class="fc" id="L133">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L134">        File file = new File(&quot;src/TestFile/SocialNetworkFile/UselessLineTest.txt&quot;);</span>
        try {
<span class="nc" id="L136">            socialNetworkCircle.readFileAndCreateSystem(file);</span>
<span class="nc" id="L137">            assertTrue(false, &quot;此处不可达&quot;);</span>
<span class="pc" id="L138">        } catch (Exception e) {</span>
<span class="fc" id="L139">            assertEquals(e.getClass(), new FileChooseException().getClass());</span>
        }
<span class="fc" id="L141">    }</span>

    @Test void testGetDistance() throws Exception {
<span class="fc" id="L144">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L145">        socialNetworkCircle</span>
<span class="fc" id="L146">                .readFileAndCreateSystem(new File(&quot;src/Spring2019_HITCS_SC_Lab3-master/SocialNetworkCircle.txt&quot;));</span>
<span class="fc" id="L147">        int distance = socialNetworkCircle.getDistance(socialNetworkCircle.getCentralPoint(),</span>
<span class="fc" id="L148">                socialNetworkCircle.getFriendByName(&quot;LisaWong&quot;));</span>
<span class="fc" id="L149">        assertEquals(1, distance);</span>
<span class="fc" id="L150">    }</span>

    @Test void testAddRelationAndRefactor() throws Exception {
<span class="fc" id="L153">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L154">        socialNetworkCircle</span>
<span class="fc" id="L155">                .readFileAndCreateSystem(new File(&quot;src/Spring2019_HITCS_SC_Lab3-master/SocialNetworkCircle.txt&quot;));</span>
<span class="fc" id="L156">        socialNetworkCircle.addRelationAndRefactor(socialNetworkCircle.getCentralPoint(),</span>
<span class="fc" id="L157">                socialNetworkCircle.getFriendByName(&quot;JackMa&quot;), 0.9);</span>
<span class="fc" id="L158">        assertTrue(socialNetworkCircle.getTrack(1).getTrackObjects()</span>
<span class="fc" id="L159">                .contains(socialNetworkCircle.getFriendByName(&quot;JackMa&quot;)));</span>
<span class="fc" id="L160">        assertFalse(socialNetworkCircle.addRelationAndRefactor(null, socialNetworkCircle.getCentralPoint(), 0.8));</span>
<span class="fc" id="L161">        assertFalse(socialNetworkCircle.addRelationAndRefactor(socialNetworkCircle.getCentralPoint(), null, 0.8));</span>
<span class="fc" id="L162">        assertFalse(socialNetworkCircle.addRelationAndRefactor(socialNetworkCircle.getCentralPoint(),</span>
<span class="fc" id="L163">                socialNetworkCircle.getFriendByName(&quot;TomWong&quot;), 0.5));</span>
<span class="fc" id="L164">        assertFalse(socialNetworkCircle.addRelationAndRefactor(socialNetworkCircle.getCentralPoint(),</span>
<span class="fc" id="L165">                socialNetworkCircle.getFriendByName(&quot;PonyMa&quot;), 0.52121));</span>
<span class="fc" id="L166">        assertFalse(socialNetworkCircle.addRelationAndRefactor(socialNetworkCircle.getCentralPoint(),</span>
<span class="fc" id="L167">                socialNetworkCircle.getFriendByName(&quot;PonyMa&quot;), 0));</span>
<span class="fc" id="L168">    }</span>

    /**
     * testing strategy : 参数为null+删除后某用户不存在与中心用户的关系
     */
    @Test void testDeleteAndRefactor() throws Exception {
<span class="fc" id="L174">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L175">        socialNetworkCircle</span>
<span class="fc" id="L176">                .readFileAndCreateSystem(new File(&quot;src/Spring2019_HITCS_SC_Lab3-master/SocialNetworkCircle.txt&quot;));</span>
<span class="fc" id="L177">        socialNetworkCircle.deleteRelationAndRefactor(socialNetworkCircle.getCentralPoint(),</span>
<span class="fc" id="L178">                socialNetworkCircle.getFriendByName(&quot;TomWong&quot;));</span>
<span class="fc" id="L179">        assertEquals(2, socialNetworkCircle.getTrackObjectsNumber(1));</span>
<span class="fc" id="L180">        assertFalse(socialNetworkCircle.deleteRelationAndRefactor(null, socialNetworkCircle.getCentralPoint()));</span>
<span class="fc" id="L181">        assertFalse(socialNetworkCircle.deleteRelationAndRefactor(socialNetworkCircle.getCentralPoint(), null));</span>
<span class="fc" id="L182">        assertTrue(socialNetworkCircle.deleteRelationAndRefactor(socialNetworkCircle.getCentralPoint(),</span>
<span class="fc" id="L183">                socialNetworkCircle.getFriendByName(&quot;LisaWong&quot;)));</span>
<span class="fc" id="L184">        assertTrue(socialNetworkCircle.deleteRelationAndRefactor(socialNetworkCircle.getCentralPoint(),</span>
<span class="fc" id="L185">                socialNetworkCircle.getFriendByName(&quot;DavidChen&quot;)));</span>
<span class="fc" id="L186">    }</span>

    /**
     * testing strategy : 不含某朋友+含有某朋友
     */
    @Test void testRemoveFriend() {
<span class="fc" id="L192">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L193">        Friend centralUser = new Friend();</span>
<span class="fc" id="L194">        assertFalse(socialNetworkCircle.removeFriend(centralUser));</span>
<span class="fc" id="L195">        socialNetworkCircle.addCentralUser(centralUser);</span>
<span class="fc" id="L196">        assertTrue(socialNetworkCircle.removeFriend(centralUser));</span>
<span class="fc" id="L197">    }</span>

    /**
     * testing strategy : num范围错误+num正常
     */
    @Test void testGetFriend() {
<span class="fc" id="L203">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L204">        Friend friend = new Friend();</span>
<span class="fc" id="L205">        Friend friend2 = new Friend();</span>
<span class="fc" id="L206">        socialNetworkCircle.addFriend(friend);</span>
<span class="fc" id="L207">        socialNetworkCircle.addFriend(friend2);</span>
<span class="fc" id="L208">        assertEquals(friend, socialNetworkCircle.getFriend(1));</span>
<span class="fc" id="L209">        assertEquals(null, socialNetworkCircle.getFriend(0));</span>
<span class="fc" id="L210">        assertEquals(null, socialNetworkCircle.getFriend(3));</span>
<span class="fc" id="L211">    }</span>

    /**
     * testing strategy : friend不是第一层轨道物体+是第一层轨道物体
     */
    @Test void testInfomationDiffusivity() throws IOException, FileChooseException {
<span class="fc" id="L217">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L218">        socialNetworkCircle</span>
<span class="fc" id="L219">                .readFileAndCreateSystem(new File(&quot;src/Spring2019_HITCS_SC_Lab3-master/SocialNetworkCircle.txt&quot;));</span>
<span class="fc" id="L220">        assertEquals(-1, socialNetworkCircle.Informationdiffusivity(socialNetworkCircle.getFriendByName(&quot;JackMa&quot;)));</span>
<span class="fc" id="L221">        assertEquals(1, socialNetworkCircle.Informationdiffusivity(socialNetworkCircle.getFriendByName(&quot;LisaWong&quot;)));</span>
<span class="fc" id="L222">        assertEquals(0, socialNetworkCircle.Informationdiffusivity(socialNetworkCircle.getFriendByName(&quot;TomWong&quot;)));</span>
<span class="fc" id="L223">    }</span>

    /**
     * testing strategy : 两者为同一个人+两者无关系+有关系
     */
    @Test void testGetLogicalDistance() throws Exception {
<span class="fc" id="L229">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L230">        socialNetworkCircle</span>
<span class="fc" id="L231">                .readFileAndCreateSystem(new File(&quot;src/Spring2019_HITCS_SC_Lab3-master/SocialNetworkCircle.txt&quot;));</span>
<span class="fc" id="L232">        int distance = socialNetworkCircle.getLogicalDistance(socialNetworkCircle.getCentralPoint(),</span>
<span class="fc" id="L233">                socialNetworkCircle.getFriendByName(&quot;LisaWong&quot;));</span>
<span class="fc" id="L234">        assertEquals(1, distance);</span>
<span class="fc" id="L235">        assertEquals(0, socialNetworkCircle.getLogicalDistance(socialNetworkCircle.getCentralPoint(),</span>
<span class="fc" id="L236">                socialNetworkCircle.getCentralPoint()));</span>
<span class="fc" id="L237">        assertEquals(-1, socialNetworkCircle.getLogicalDistance(socialNetworkCircle.getCentralPoint(),</span>
<span class="fc" id="L238">                socialNetworkCircle.getFriendByName(&quot;PonyMa&quot;)));</span>
<span class="fc" id="L239">    }</span>

    /**
     * testing strategy : 为中心用户+无关系+有关系
     */
    @Test void testGetFriendTrackNum() throws Exception {
<span class="fc" id="L245">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L246">        socialNetworkCircle</span>
<span class="fc" id="L247">                .readFileAndCreateSystem(new File(&quot;src/Spring2019_HITCS_SC_Lab3-master/SocialNetworkCircle.txt&quot;));</span>
<span class="fc" id="L248">        assertEquals(0, socialNetworkCircle.getFriendTrackNum(socialNetworkCircle.getCentralPoint()));</span>
<span class="fc" id="L249">        assertEquals(-1, socialNetworkCircle.getFriendTrackNum(socialNetworkCircle.getFriendByName(&quot;PonyMa&quot;)));</span>
<span class="fc" id="L250">        assertEquals(1, socialNetworkCircle.getFriendTrackNum(socialNetworkCircle.getFriendByName(&quot;LisaWong&quot;)));</span>
<span class="fc" id="L251">    }</span>

    /**
     * testing strategy : 添加空的中心用户
     */
    @Test void testAddCentralUser() {
<span class="fc" id="L257">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
<span class="fc" id="L258">        assertEquals(false, socialNetworkCircle.addCentralUser(null));</span>
<span class="fc" id="L259">    }</span>
    
    /**
     * testing strategy :无中心用户
     */
    @Test void testCheckRep() {
<span class="fc" id="L265">        SocialNetworkCircle socialNetworkCircle = new SocialNetworkCircle();</span>
        try {
<span class="nc" id="L267">            socialNetworkCircle.checkRep();</span>
<span class="pc" id="L268">        } catch (FileChooseException e) {</span>
<span class="fc" id="L269">            assertTrue(true);</span>
        }
<span class="fc" id="L271">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.3.201901230119</span>test (2019年5月19日 下午11:06:41)</div></body></html>